<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnalyticaLoan - Credit Underwriting Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <i class="fas fa-chart-line"></i>
            <span>AnalyticaLoan</span>
        </div>
        
        <nav class="nav-menu">
            <a href="#dashboard" class="nav-item active" data-page="dashboard">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <a href="#applications" class="nav-item" data-page="applications">
                <i class="fas fa-file-alt"></i>
                <span>Applications</span>
            </a>
            <a href="#underwriting" class="nav-item" data-page="underwriting">
                <i class="fas fa-tasks"></i>
                <span>Underwriting</span>
            </a>
            <a href="#analytics" class="nav-item" data-page="analytics">
                <i class="fas fa-chart-bar"></i>
                <span>Analytics</span>
            </a>
            <a href="#monitoring" class="nav-item" data-page="monitoring">
                <i class="fas fa-heartbeat"></i>
                <span>Monitoring</span>
            </a>
            <a href="#admin" class="nav-item" data-page="admin">
                <i class="fas fa-cog"></i>
                <span>Admin</span>
            </a>
        </nav>
        
        <div class="user-profile">
            <div class="avatar">
                <i class="fas fa-user"></i>
            </div>
            <div class="user-info">
                <div class="user-name">John Underwriter</div>
                <div class="user-role">Senior Underwriter</div>
            </div>
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1 id="page-title">Dashboard</h1>
            </div>
            <div class="header-right">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search applications...">
                </div>
                <button class="notification-btn">
                    <i class="fas fa-bell"></i>
                    <span class="badge">3</span>
                </button>
            </div>
        </header>

        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page active">
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon pending">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value">24</div>
                        <div class="stat-label">Pending Review</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon approved">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value">156</div>
                        <div class="stat-label">Approved This Month</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon rejected">
                        <i class="fas fa-times-circle"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value">23</div>
                        <div class="stat-label">Rejected This Month</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon processing">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value">8</div>
                        <div class="stat-label">In Processing</div>
                    </div>
                </div>
            </div>

            <!-- Recent Applications Table -->
            <div class="card">
                <div class="card-header">
                    <h2>Recent Applications</h2>
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i> New Application
                    </button>
                </div>
                <div class="card-body">
                    <table class="data-table" id="applications-table">
                        <thead>
                            <tr>
                                <th>Application ID</th>
                                <th>Applicant</th>
                                <th>Loan Amount</th>
                                <th>Credit Score</th>
                                <th>Status</th>
                                <th>Submitted</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Underwriting Page -->
        <div id="underwriting-page" class="page">
            <div class="workflow-container">
                <div class="workflow-header">
                    <h2>Application Underwriting Workflow</h2>
                    <div class="workflow-controls">
                        <button class="btn btn-secondary" onclick="refreshWorkflow()">
                            <i class="fas fa-sync"></i> Refresh
                        </button>
                    </div>
                </div>

                <!-- Workflow Steps -->
                <div class="workflow-steps">
                    <div class="workflow-step completed">
                        <div class="step-icon"><i class="fas fa-check"></i></div>
                        <div class="step-content">
                            <div class="step-title">Document Validation</div>
                            <div class="step-status">Completed</div>
                        </div>
                    </div>
                    <div class="workflow-step completed">
                        <div class="step-icon"><i class="fas fa-check"></i></div>
                        <div class="step-content">
                            <div class="step-title">OCR Extraction</div>
                            <div class="step-status">Completed</div>
                        </div>
                    </div>
                    <div class="workflow-step active">
                        <div class="step-icon"><i class="fas fa-spinner fa-spin"></i></div>
                        <div class="step-content">
                            <div class="step-title">Credit Bureau Check</div>
                            <div class="step-status">In Progress...</div>
                        </div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-icon"><i class="fas fa-circle"></i></div>
                        <div class="step-content">
                            <div class="step-title">ML Scoring</div>
                            <div class="step-status">Pending</div>
                        </div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-icon"><i class="fas fa-circle"></i></div>
                        <div class="step-content">
                            <div class="step-title">AI Analysis</div>
                            <div class="step-status">Pending</div>
                        </div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-icon"><i class="fas fa-circle"></i></div>
                        <div class="step-content">
                            <div class="step-title">Policy Compliance</div>
                            <div class="step-status">Pending</div>
                        </div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-icon"><i class="fas fa-circle"></i></div>
                        <div class="step-content">
                            <div class="step-title">Final Decision</div>
                            <div class="step-status">Pending</div>
                        </div>
                    </div>
                </div>

                <!-- Application Details -->
                <div class="card mt-3">
                    <div class="card-header">
                        <h3>Application Details</h3>
                    </div>
                    <div class="card-body">
                        <div class="detail-grid">
                            <div class="detail-item">
                                <label>Applicant Name:</label>
                                <span>Budi Santoso</span>
                            </div>
                            <div class="detail-item">
                                <label>Loan Amount:</label>
                                <span>Rp 150,000,000</span>
                            </div>
                            <div class="detail-item">
                                <label>Loan Term:</label>
                                <span>24 months</span>
                            </div>
                            <div class="detail-item">
                                <label>Monthly Income:</label>
                                <span>Rp 20,000,000</span>
                            </div>
                            <div class="detail-item">
                                <label>Credit Score:</label>
                                <span class="badge badge-success">720</span>
                            </div>
                            <div class="detail-item">
                                <label>Risk Rating:</label>
                                <span class="badge badge-info">A</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Page -->
        <div id="analytics-page" class="page">
            <div class="analytics-grid">
                <div class="card chart-card">
                    <div class="card-header">
                        <h3>Monthly Approvals Trend</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="approvals-chart"></canvas>
                    </div>
                </div>
                
                <div class="card chart-card">
                    <div class="card-header">
                        <h3>Risk Distribution</h3>
                    </div>
                    <div class="card-body">
                        <canvas id="risk-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Monitoring Page -->
        <div id="monitoring-page" class="page">
            <div class="monitoring-grid">
                <div class="card">
                    <div class="card-header">
                        <h3>System Health</h3>
                    </div>
                    <div class="card-body">
                        <div class="health-status">
                            <div class="health-item healthy">
                                <i class="fas fa-circle"></i>
                                <span>API Gateway</span>
                            </div>
                            <div class="health-item healthy">
                                <i class="fas fa-circle"></i>
                                <span>Document Service</span>
                            </div>
                            <div class="health-item healthy">
                                <i class="fas fa-circle"></i>
                                <span>Underwriting Service</span>
                            </div>
                            <div class="health-item healthy">
                                <i class="fas fa-circle"></i>
                                <span>Scoring Service</span>
                            </div>
                            <div class="health-item warning">
                                <i class="fas fa-circle"></i>
                                <span>PostgreSQL</span>
                            </div>
                            <div class="health-item healthy">
                                <i class="fas fa-circle"></i>
                                <span>Weaviate</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Page -->
        <div id="admin-page" class="page">
            <div class="card">
                <div class="card-header">
                    <h3>User Management</h3>
                    <button class="btn btn-primary">
                        <i class="fas fa-user-plus"></i> Add User
                    </button>
                </div>
                <div class="card-body">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            <!-- Users loaded dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
